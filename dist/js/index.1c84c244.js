(function(e){function t(t){for(var a,o,c=t[0],l=t[1],s=t[2],p=0,d=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={index:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cbf3")},"0947":function(e,t,n){},1:function(e,t){},2:function(e,t){},"2e6b":function(e,t,n){"use strict";(function(e){t["a"]={linux(){return"linux"===e.platform},macOS(){return"darwin"===e.platform},windows(){return"win32"===e.platform},production(){return!0},dev(){return!1}}}).call(this,n("4362"))},3:function(e,t){},"306e":function(e,t){e.exports=require("http2")},"33b3":function(e,t,n){},"35c0":function(e,t){e.exports=require("dns")},"3af7":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("bdb9"),i=n("7d34"),r=n.n(i),o=n("4c2e");class c{constructor({username:e,password:t,url:n}){this.cloudPath="/rubick/db.txt",this.client=Object(o["createClient"])(n,{username:e,password:t}),this.client.exists("/").then(e=>{!e&&new a["Notification"]({title:"导出失败",body:"webdav 连接失败"}).show()}).catch(e=>{new a["Notification"]({title:"导出失败",body:"WebDav连接出错"+e}).show()})}async createWriteStream(e){try{const e=await this.client.exists("/rubick");e||await this.client.createDirectory("/rubick")}catch(n){new a["Notification"]({title:"导出失败",body:"WebDav目录创建出错:"+n}).show()}const t=new r.a;e.dump(t,{filter:e=>!e._attachments}),t.pipe(this.client.createWriteStream(this.cloudPath,{},()=>{new a["Notification"]({title:"已导出到坚果云",body:"文件目录为："+this.cloudPath}).show()}))}async createReadStream(e){try{const t=await this.client.exists(this.cloudPath);if(!t)return new a["Notification"]({title:"导入失败",body:"请确认坚果云上已存在数据"}).show();const n=await this.client.getFileContents(this.cloudPath,{format:"text"});await e.loadIt(n),new a["Notification"]({title:"导入成功",body:"数据已导入到 rubick，主应用数据需重启后生效"}).show()}catch(t){new a["Notification"]({title:"导入失败",body:"WebDav目录导入出错:"+t}).show()}}}},4:function(e,t){},"4e79":function(e,t,n){"use strict";(function(e){n("14d9"),n("e9f5"),n("ab43"),n("e9c4"),n("5087");var a=n("83ef"),i=n.n(a),r=n("df7c"),o=n.n(r),c=n("bd30"),l=n.n(c),s=n("1464"),u=n.n(s),p=n("8c6f"),d=n.n(p),g=n("bdb9"),f=n("cee4");u()();class b{constructor(e){this.pluginCaches={},i.a.existsSync(e.baseDir)||(i.a.mkdirsSync(e.baseDir),i.a.writeFileSync(e.baseDir+"/package.json",JSON.stringify({dependencies:{},volta:{node:"16.19.1"}}))),this.baseDir=e.baseDir;let t=e.registry||"https://registry.npmmirror.com";try{const e=g["ipcRenderer"].sendSync("msg-trigger",{type:"dbGet",data:{id:"rubick-localhost-config"}});t=e.data.register}catch(n){}this.registry=t||"https://registry.npmmirror.com/"}async upgrade(e){const t=JSON.parse(i.a.readFileSync(this.baseDir+"/package.json","utf-8")),n="https://registry.npmmirror.com/"+e;try{const a=t.dependencies[e].replace("^","");let i=this.pluginCaches[e];if(!i){const{data:t}=await f["a"].get(n,{timeout:2e3});i=t["dist-tags"].latest,this.pluginCaches[e]=i}i>a&&await this.install([e],{isDev:!1})}catch(a){}}async getAdapterInfo(e,t){let n;const a=t||o.a.resolve(this.baseDir,"node_modules",e,"plugin.json");if(await i.a.pathExists(a))n=JSON.parse(i.a.readFileSync(a,"utf-8"));else{const t=await l.a.get(`https://cdn.jsdelivr.net/npm/${e}/plugin.json`);n=JSON.parse(t.body)}return n}async install(e,t){const n=t.isDev?"link":"install";await this.execCommand(n,e)}async update(...e){await this.execCommand("update",e)}async uninstall(e,t){const n=t.isDev?"unlink":"uninstall";await this.execCommand(n,e)}async list(){const e=JSON.parse(await i.a.readFile(this.baseDir+"/package.json","utf-8")),t=[];for(const n in e.dependencies)t.push(n);return t}async execCommand(t,n){return new Promise((a,i)=>{let r=[t].concat("uninstall"!==t&&"link"!==t?n.map(e=>e+"@latest"):n);"link"!==t&&(r=r.concat("--color=always").concat("--save").concat("--registry="+this.registry));const o=d()("npm",r,{cwd:this.baseDir});console.log(r);let c="";o.stdout.on("data",e=>{c+=e}).pipe(e.stdout),o.stderr.on("data",e=>{c+=e}).pipe(e.stderr),o.on("close",e=>{e?i({code:e,data:c}):a({code:0,data:c})})})}}t["a"]=b}).call(this,n("4362"))},"4fa3":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));n("e9f5"),n("910d"),n("ab43");var a=n("2e6b"),i=n("bdb9"),r=n("8a58"),o=n.n(r),c=n("3e8f"),l=n.n(c),s=n("df7c"),u=n.n(s),p=n("b56f"),d=n.n(p);function g(){let t;if(a["a"].macOS()){if(!i["clipboard"].has("NSFilenamesPboardType"))return null;const e=i["clipboard"].read("NSFilenamesPboardType");if(!e)return null;try{t=o.a.parse(e)}catch(c){return null}}else if("win32"===e.platform)try{const e=n("d43a");t=e.readFilePaths()}catch(c){}else{if(!a["a"].linux())return null;if(!i["clipboard"].has("text/uri-list"))return null;const e=i["clipboard"].read("text/uri-list").match(/^file:\/\/\/.*/gm);if(!e||!e.length)return null;t=e.map(e=>decodeURIComponent(e).replace(/^file:\/\//,""))}if(!Array.isArray(t))return null;const r=t.map(e=>{if(!l.a.existsSync(e))return!1;let t;try{t=d.a.lstatSync(e)}catch(c){return!1}return{isFile:t.isFile(),isDirectory:t.isDirectory(),name:u.a.basename(e)||e,path:e}}).filter(Boolean);return r.length?r:null}}).call(this,n("4362"))},5:function(e,t){},"5c46":function(e,t,n){"use strict";n.r(t);n("14d9"),n("e9f5"),n("7d54");var a=n("df7c"),i=n.n(a),r=n("b56f"),o=n.n(r);const c=["/usr/share/applications","/var/lib/snapd/desktop/applications",window.process.env.HOME+"/.local/share/applications"],l="";function s(e,t){let n=null;try{if(!o.a.existsSync(e))return;n=o.a.readdirSync(e)}catch(a){return}if(0!==n.length)for(const r of n){const n=i.a.join(e,r);".desktop"===i.a.extname(n)&&t.push(n)}}function u(e){let t=null;try{t=o.a.readFileSync(e,"utf8")}catch(f){return null}if(!t.includes("[Desktop Entry]"))return null;t=t.substr(t.indexOf("[Desktop Entry]")).replace("[Desktop Entry]","").trim();const n=t.indexOf("\n[");n>0&&(t=t.substr(0,n).trim());const a={};if(t.match(/^[\w\-[\]]+ ?=.*$/gm).forEach(e=>{const t=e.indexOf("=");a[e.substr(0,t).trim()]=e.substr(t+1).trim()}),"Application"!==a.Type)return null;if(!a.Exec)return null;if("true"===a.NoDisplay&&!a.Exec.startsWith("gnome-control-center"))return null;let r=String(window.process.env.DESKTOP_SESSION).toLowerCase();if("ubuntu"===r&&(r="gnome",a.OnlyShowIn&&!a.OnlyShowIn.toLowerCase().includes(r)))return null;if(a.NotShowIn&&a.NotShowIn.toLowerCase().includes(r))return null;let c=a.Icon;if(!c)return null;if(c.startsWith("/")){if(!o.a.existsSync(c))return null}else if(e.startsWith("/usr/share/applications")||e.startsWith("/var/lib/snapd/desktop/applications"))c=p(c);else{if(!e.startsWith(window.process.env.HOME+"/.local/share/applications"))return null;e=i.a.join(window.process.env.HOME,".local/share/icons",e+".png"),o.a.existsSync(e)||(e=l)}let s="";const u=window.process.env.LANG.split(".")[0];s=`Comment[${u}]`in a?a[`Comment[${u}]`]:a.Comment?a.Comment:e;let d=a.Exec.replace(/ %[A-Za-z]/g,"").replace(/"/g,"").trim();"true"===a.Terminal&&(d="gnome-terminal -x "+d);const g={value:"plugin",pluginType:"app",desc:s,icon:"file://"+c,keyWords:[a.Name],action:d};if("X-Ubuntu-Gettext-Domain"in a){const e=a["X-Ubuntu-Gettext-Domain"];e&&e!==a.Name&&g.keyWords.push(e)}return g}function p(e){const t=["ubuntu-mono-dark","ubuntu-mono-light","Yaru","hicolor","Adwaita","Humanity"],n=["48x48","48","scalable","256x256","512x512","256","512"],a=["apps","categories","devices","mimetypes","legacy","actions","places","status","mimes"],r=[".png",".svg"];for(const c of t)for(const t of n)for(const n of a)for(const a of r){let r=i.a.join("/usr/share/icons",c,t,n,e+a);if(o.a.existsSync(r))return r;if(r=i.a.join("/usr/share/icons",c,n,t,e+a),o.a.existsSync(r))return r}return o.a.existsSync(i.a.join("/usr/share/pixmaps",e+".png"))?i.a.join("/usr/share/pixmaps",e+".png"):l}t["default"]=()=>{const e=[],t=[];return c.forEach(e=>{s(e,t)}),t.forEach(t=>{e.push(u(t))}),e.filter(e=>!!e)}},"5d79":function(e,t,n){"use strict";n("8fa9")},"636c":function(e,t,n){"use strict";(function(e){n("14d9"),n("e9f5"),n("f665"),n("7d54"),n("ab43"),n("e9c4"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),n("df7c"),n("3e8f");var t=n("16b2");n("3af7");const a=n("1a49");t["a"].plugin(a.plugin);const i=n("f530");t["a"].plugin({loadIt:i.load}),t["a"].adapter("writableStream",a.adapters.writableStream)}).call(this,n("1c35").Buffer)},"6c03":function(e,t,n){e.exports=n.p+"img/link.88708466.png"},"8f1a":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("e9f5"),n("910d");var a=n("3e8f"),i=n("8a58"),r=n.n(i);function o(t,n,i=!1){let o=new e.from([]);const c=Object(a["spawn"])("/usr/sbin/system_profiler",["-xml","-detailLevel","mini","SPApplicationsDataType"]);c.stdout.on("data",t=>{o=e.concat([o,t])}),c.on("exit",e=>{if(0===e)try{const[e]=r.a.parse(o.toString());return t(i?0!==e._items.filter(e=>e._name===i).length:e._items)}catch(a){n(a)}else n([])}),c.on("error",e=>{n(e)})}}).call(this,n("1c35").Buffer)},"8fa9":function(e,t,n){},"9d3a":function(e,t,n){"use strict";n.r(t);n("14d9"),n("e9f5"),n("7d54"),n("ab43"),n("e9c4"),n("5087");var a=n("3e8f"),i=n.n(a),r=n("df7c"),o=n.n(r),c=n("3c43"),l=n.n(c),s=n("bdb9"),u=n("daba");const p=o.a.resolve("C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs"),d=o.a.join(l.a.homedir(),"./AppData/Roaming"),g=o.a.join(d,"Microsoft\\Windows\\Start Menu\\Programs"),f=[],b=/[\u4e00-\u9fa5]/,m=o.a.join(l.a.tmpdir(),"ProcessIcon"),h=i.a.existsSync(m);h||i.a.mkdirSync(m);const y=e=>{const t=o.a.join(m,e.name+".png");i.a.exists(t,n=>{n||u["app"].getFileIcon(e.desc,{size:"large"}).then(e=>{try{const n=e.toPNG();i.a.writeFile(t,n,e=>{})}catch(n){}}).catch(e=>{})})};function w(e){i.a.readdir(e,(function(t,n){t?console.warn(t):n.forEach((function(t){const n=o.a.join(e,t);i.a.stat(n,(function(e,i){if(e)console.warn("获取文件stats失败");else{const e=i.isFile(),u=i.isDirectory();if(e){if("desktop.ini"===t.toLowerCase())return;const e=o.a.extname(t).toLowerCase();if(".lnk"!==e&&".url"!==e&&".exe"!==e)return;const i=t.replace(e,""),u=[i];let p={};if(".lnk"===e||".url"===e)try{p=s["shell"].readShortcutLink(n)}catch(r){try{const e=n.replace(/'/g,"''"),t=`powershell -NoProfile -Command "$sh=New-Object -ComObject WScript.Shell;$s=$sh.CreateShortcut('${e}');$s.TargetPath"`,i=Object(a["execSync"])(t,{encoding:"utf8"}).trim();i&&(p={target:i,args:"",description:"",cwd:"",appUserModelId:""})}catch(c){}}else".exe"===e&&(p={target:n});const d=o.a.basename(p.target).toLowerCase();if(!p.target||d.startsWith("uninstall")||d.startsWith("uninst"))return;if(u.push(o.a.basename(p.target,".exe")),b.test(i));else{const e=i.split(" ").map(e=>e[0]).join("");u.push(e)}const g=o.a.join(l.a.tmpdir(),"ProcessIcon",encodeURIComponent(i)+".png"),m={value:"plugin",desc:p.target,type:"app",icon:g,pluginType:"app",action:`start "dummyclient" "${p.target}"`,keyWords:u,name:i,names:JSON.parse(JSON.stringify(u))};f.push(m),y(m)}u&&w(n)}}))}))}))}t["default"]=()=>(w(p),w(g),f)},a886:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="a886"},b56f:function(e,t){e.exports=require("original-fs")},cbf3:function(e,t,n){"use strict";n.r(t);n("e1f5");var a=n("5efb"),i=(n("06ea"),n("fe2b")),r=(n("0c1d"),n("8592")),o=(n("a71a"),n("b558")),c=(n("0ece"),n("27fd")),l=(n("3e86"),n("7571")),s=(n("50ac"),n("9a632")),u=(n("1815"),n("e32c")),p=(n("ee33"),n("a79d")),d=(n("5b61"),n("4df5")),g=n("7a23"),f=(n("380f"),n("f64c")),b=(n("e9f5"),n("910d"),n("f665"),n("e9c4"),n("5087"),n("3e8f"));n("ab43");const m="rubick-local-config",h={getConfig(){const e=window.rubick.db.get(m)||{};return e.data},setConfig(e){const t=window.rubick.db.get(m)||{};window.rubick.db.put({_id:m,_rev:t._rev,data:{...t.data,...e}})}};var y=h;const w={class:"options"},v={key:0,class:"history-plugins"},O={class:"name ellpise"},j={key:0,class:"badge"},A=["innerHTML"];var C=Object(g["defineComponent"])({__name:"result",props:{searchValue:{type:[String,Number],default:""},options:{type:Array,default:(()=>[])()},currentSelect:{type:Number,default:0},currentPlugin:{},pluginHistory:(()=>[])(),clipboardFile:(()=>[])()},emits:["choosePlugin","setPluginHistory"],setup(e,{emit:t}){const n=window.require("path"),a=window.require("@electron/remote"),i=Object(g["ref"])(y.getConfig()),r=e,o=t,c=(e,t)=>{if("string"!==typeof e)return;if(!r.searchValue||!t)return e;const n=e.substring(t[0],t[1]+1);return`<div>${e.substring(0,t[0])}<span style='color: var(--ant-error-color)'>${n}</span>${e.substring(t[1]+1,e.length)}</div>`},l=(e="")=>e.length>80?`${e.substr(0,63)}...${e.substr(e.length-14,e.length)}`:e,s=e=>{for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(e[n].zIndex>e[t].zIndex){let a=e[t];e[t]=e[n],e[n]=a}return e.slice(0,20)},u=e=>{o("choosePlugin",e)},p=Object(g["reactive"])({plugin:null});let d;const f=(e,t)=>{const n=d.getMenuItemById("pinToMain"),a=d.getMenuItemById("unpinFromMain");n.visible=!t.pin,a.visible=t.pin,d.popup({x:e.pageX,y:e.pageY}),p.plugin=t},b=()=>{const e=[{id:"removeRecentCmd",label:'从"使用记录"中删除',icon:n.join(__static,"icons","delete@2x.png"),click:()=>{const e=r.pluginHistory.filter(e=>e.name!==p.plugin.name);o("setPluginHistory",Object(g["toRaw"])(e))}},{id:"pinToMain",label:'固定到"搜索面板"',icon:n.join(__static,"icons","pin@2x.png"),click:()=>{const e=r.pluginHistory.map(e=>(e.name===p.plugin.name&&(e.pin=!0),e));o("setPluginHistory",Object(g["toRaw"])(e))}},{id:"unpinFromMain",label:'从"搜索面板"取消固定',icon:n.join(__static,"icons","unpin@2x.png"),click:()=>{const e=r.pluginHistory.map(e=>(e.name===p.plugin.name&&(e.pin=!1),e));o("setPluginHistory",Object(g["toRaw"])(e))}}];d=a.Menu.buildFromTemplate(e)};return b(),(t,n)=>{const a=Object(g["resolveComponent"])("a-avatar"),r=Object(g["resolveComponent"])("a-col"),o=Object(g["resolveComponent"])("a-row"),p=Object(g["resolveComponent"])("a-list-item-meta"),d=Object(g["resolveComponent"])("a-list-item"),b=Object(g["resolveComponent"])("a-list");return Object(g["withDirectives"])((Object(g["openBlock"])(),Object(g["createElementBlock"])("div",w,[e.options.length||e.searchValue||e.clipboardFile.length||!i.value.perf.common.history?(Object(g["openBlock"])(),Object(g["createBlock"])(b,{key:1,"item-layout":"horizontal",dataSource:s(e.options)},{renderItem:Object(g["withCtx"])(({item:t,index:n})=>[Object(g["createVNode"])(d,{onClick:()=>t.click(),class:Object(g["normalizeClass"])(e.currentSelect===n?"active op-item":"op-item")},{default:Object(g["withCtx"])(()=>[Object(g["createVNode"])(p,{description:l(t.desc)},{title:Object(g["withCtx"])(()=>[Object(g["createElementVNode"])("span",{innerHTML:c(t.name,t.match)},null,8,A)]),avatar:Object(g["withCtx"])(()=>[Object(g["createVNode"])(a,{style:{"border-radius":"0"},src:t.icon,onError:()=>!0},null,8,["src"])]),_:2},1032,["description"])]),_:2},1032,["onClick","class"])]),_:1},8,["dataSource"])):(Object(g["openBlock"])(),Object(g["createElementBlock"])("div",v,[Object(g["createVNode"])(o,null,{default:Object(g["withCtx"])(()=>[(Object(g["openBlock"])(!0),Object(g["createElementBlock"])(g["Fragment"],null,Object(g["renderList"])(e.pluginHistory,(t,n)=>(Object(g["openBlock"])(),Object(g["createBlock"])(r,{onClick:()=>u(t),onContextmenu:Object(g["withModifiers"])(e=>f(e,t),["prevent"]),class:Object(g["normalizeClass"])(e.currentSelect===n?"active history-item":"history-item"),span:3,key:n},{default:Object(g["withCtx"])(()=>[Object(g["createVNode"])(a,{style:{width:"28px",height:"28px"},src:t.icon},null,8,["src"]),Object(g["createElementVNode"])("div",O,Object(g["toDisplayString"])(t.cmd||t.pluginName||t._name||t.name),1),t.pin?(Object(g["openBlock"])(),Object(g["createElementBlock"])("div",j)):Object(g["createCommentVNode"])("",!0)]),_:2},1032,["onClick","onContextmenu","class"]))),128))]),_:1})]))],512)),[[g["vShow"],!e.currentPlugin.name]])}}});n("ce38");const k=C;var S=k,P=n("3915"),x=n.n(P),N=(n("14d9"),n("bdb9"));const I={class:"rubick-select"},F=["src"],B={class:"ellipse"},D=["src"],V={class:"suffix-tool"};var L=Object(g["defineComponent"])({__name:"search",props:{searchValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},pluginHistory:(()=>[])(),currentPlugin:{},pluginLoading:Boolean,clipboardFile:(()=>[])()},emits:["onSearch","changeCurrent","openMenu","changeSelect","choosePlugin","focus","clearSearchValue","readClipboardContent","clearClipbord"],setup(e,{emit:t}){const a=window.require("@electron/remote"),{Menu:i}=a,r=Object(g["ref"])(y.getConfig()),o=e,c=e=>{p({value:e.target.value}),l("onSearch",e)},l=t,s=(e,t)=>{"space"!==t&&e.preventDefault();const{ctrlKey:n,shiftKey:a,altKey:i,metaKey:c}=e,s=[];n&&s.push("control"),a&&s.push("shift"),i&&s.push("alt"),c&&s.push("meta"),N["ipcRenderer"].send("msg-trigger",{type:"sendPluginSomeKeyDownEvent",data:{keyCode:e.code,modifiers:s}});const u=""===e.target.value&&!o.pluginHistory.length||o.currentPlugin.name;switch(t){case"up":l("changeCurrent",-1);break;case"down":l("changeCurrent",1);break;case"left":l("changeCurrent",-1);break;case"right":l("changeCurrent",1);break;case"enter":if(u)return;l("choosePlugin");break;case"space":if(u||!r.value.perf.common.space)return;e.preventDefault(),l("choosePlugin");break;default:break}},u=e=>{const{ctrlKey:t,metaKey:n}=e;""===e.target.value&&8===e.keyCode&&d(),(t||n)&&"v"===e.key&&l("readClipboardContent")},p=({value:e})=>{if(o.currentPlugin.name)return N["ipcRenderer"].sendSync("msg-trigger",{type:"sendSubInputChangeEvent",data:{text:e}})},d=()=>{l("changeSelect",{}),l("clearClipbord"),N["ipcRenderer"].send("msg-trigger",{type:"removePlugin"})},f=()=>{let e=[{label:r.value.perf.common.hideOnBlur?"钉住":"自动隐藏",click:m},{label:"zh-CN"===r.value.perf.common.lang?"切换语言":"Change Language",submenu:[{label:"简体中文",click:()=>{b("zh-CN")}},{label:"English",click:()=>{b("en-US")}}]}];o.currentPlugin&&o.currentPlugin.logo&&(e=e.concat([{label:"开发者工具",click:()=>{N["ipcRenderer"].send("msg-trigger",{type:"openPluginDevTools"})}},{label:"当前插件信息",submenu:[{label:"简介"},{label:"功能"}]},{label:"分离窗口",click:w}]));let t=i.buildFromTemplate(e);t.popup()},b=e=>{let t={...r.value};t.perf.common.lang=e,y.setConfig(JSON.parse(JSON.stringify(t))),r.value=t},m=()=>{let e={...r.value};e.perf.common.hideOnBlur=!e.perf.common.hideOnBlur,y.setConfig(JSON.parse(JSON.stringify(e))),r.value=e},h=()=>{if(o.clipboardFile[0].dataUrl)return o.clipboardFile[0].dataUrl;try{return N["ipcRenderer"].sendSync("msg-trigger",{type:"getFileIcon",data:{path:o.clipboardFile[0].path}})}catch(e){return n("d136")}},w=()=>{N["ipcRenderer"].send("msg-trigger",{type:"detachPlugin"})},v=Object(g["ref"])(null);return window.rubick.hooks.onShow=()=>{v.value.focus()},window.rubick.hooks.onHide=()=>{l("clearSearchValue")},(t,n)=>{const a=Object(g["resolveComponent"])("a-tag"),i=Object(g["resolveComponent"])("a-input");return Object(g["openBlock"])(),Object(g["createElementBlock"])("div",I,[e.clipboardFile.length?(Object(g["openBlock"])(),Object(g["createElementBlock"])("div",{key:0,class:Object(g["normalizeClass"])(e.clipboardFile[0].name?"clipboard-tag":"clipboard-img")},[Object(g["createElementVNode"])("img",{style:{"margin-right":"8px"},src:h()},null,8,F),Object(g["createElementVNode"])("div",B,Object(g["toDisplayString"])(e.clipboardFile[0].name),1),e.clipboardFile.length>1?(Object(g["openBlock"])(),Object(g["createBlock"])(a,{key:0,color:"#aaa"},{default:Object(g["withCtx"])(()=>[Object(g["createTextVNode"])(Object(g["toDisplayString"])(e.clipboardFile.length),1)]),_:1})):Object(g["createCommentVNode"])("",!0)],2)):(Object(g["openBlock"])(),Object(g["createElementBlock"])("div",{key:1,class:Object(g["normalizeClass"])(e.currentPlugin.cmd?"rubick-tag":"")},[Object(g["createElementVNode"])("img",{onClick:n[0]||(n[0]=()=>l("openMenu")),class:"rubick-logo",src:e.currentPlugin.logo||r.value.perf.custom.logo},null,8,D),Object(g["withDirectives"])(Object(g["createElementVNode"])("div",{class:"select-tag"},Object(g["toDisplayString"])(e.currentPlugin.cmd),513),[[g["vShow"],e.currentPlugin.cmd]])],2)),Object(g["createVNode"])(i,{id:"search",ref_key:"mainInput",ref:v,class:"main-input",onInput:n[2]||(n[2]=e=>c(e)),onKeydown:[n[3]||(n[3]=Object(g["withKeys"])(e=>s(e,"left"),["left"])),n[4]||(n[4]=Object(g["withKeys"])(e=>s(e,"right"),["right"])),n[5]||(n[5]=Object(g["withKeys"])(e=>s(e,"down"),["down"])),n[6]||(n[6]=Object(g["withKeys"])(e=>s(e,"down"),["tab"])),n[7]||(n[7]=Object(g["withKeys"])(e=>s(e,"up"),["up"])),n[8]||(n[8]=e=>u(e))],value:e.searchValue,placeholder:e.pluginLoading?"更新检测中...":e.placeholder||r.value.perf.custom.placeholder,onKeypress:[n[9]||(n[9]=Object(g["withKeys"])(e=>s(e,"enter"),["enter"])),n[10]||(n[10]=Object(g["withKeys"])(e=>s(e,"space"),["space"]))],onFocus:n[11]||(n[11]=e=>l("focus"))},{suffix:Object(g["withCtx"])(()=>[Object(g["createElementVNode"])("div",V,[Object(g["createVNode"])(Object(g["unref"])(x.a),{onClick:n[1]||(n[1]=e=>f()),class:"icon-more"})])]),_:1},8,["value","placeholder"])])}}});n("5d79");const R=L;var E=R;const M=620,H=60,J=70,W=70;var _=(e,t)=>{const n=t.length?W:0;return e?e.length?e.length*J+H>M?M:e.length*J+H:H+n:M+n},Q=(n("7d54"),n("daba")),T=n("2e6b");let U;T["a"].macOS()?U=n("f508"):T["a"].windows()?U=n("9d3a"):T["a"].linux()&&(U=n("5c46"));var G=U.default,K=n("4e79"),z=(n("636c"),n("df7c")),Y=n.n(z);const q=()=>{const e=Object(g["reactive"])({searchValue:"",placeholder:""}),t=t=>{const n=t.target.value;e.searchValue=n},n=t=>{e.searchValue=t};return window.setSubInput=({placeholder:t})=>{e.placeholder=t},window.removeSubInput=()=>{e.placeholder=""},window.setSubInputValue=({value:t})=>{e.searchValue=t},window.getMainInputInfo=()=>({value:e.searchValue,placeholder:e.placeholder}),{...Object(g["toRefs"])(e),onSearch:t,setSearchValue:n}};var X=q,Z=(n("a732"),n("f7fe")),$=n.n(Z),ee=n("d22a");const te=Q["app"].getPath("userData"),ne=Y.a.join(te,"./rubick-plugins-new"),ae="rubick-plugin-history";function ie({plugin:e,fe:t,cmd:n,ext:a,openPlugin:i,option:r}){const o=Y.a.resolve(ne,"node_modules",e.name),c={...Object(g["toRaw"])(e),indexPath:"file://"+Y.a.join(o,"./",e.main||""),cmd:n.label||n,feature:t,ext:a};e.main||(c.tplPath=T["a"].dev()?"http://localhost:8083/#/":`file://${__static}/tpl/index.html`),"rubick-system-feature"===e.name&&(c.indexPath=T["a"].dev()?"http://localhost:8081/#/":`file://${__static}/feature/index.html`),i(c,r)}var re=n("4fa3"),oe=({currentPlugin:e,optionsRef:t,openPlugin:a,setOptionsRef:i})=>{const r=Object(g["ref"])([]),o=(t,o=!0)=>{const l=y.getConfig();if(!l.perf.common.autoPast&&o)return;if(e.value.name)return;const s=t||Object(re["a"])();if(s){window.setSubInputValue({value:""}),r.value=s;const e=Object(Q["getGlobal"])("LOCAL_PLUGINS").getLocalPlugins(),t=[{name:"复制路径",value:"plugin",icon:n("6c03"),desc:"复制路径到剪切板",click:()=>{N["clipboard"].writeText(s.map(e=>e.path).join(",")),N["ipcRenderer"].send("msg-trigger",{type:"hideMainWindow"})}}],o=s.filter(e=>Y.a.extname(s[0].path)===Y.a.extname(e.path)).length;return o!==s.length?void i(t):(1===s.length&&e.forEach(e=>{const n=e.features;n&&n.forEach(n=>{const i=Y.a.extname(s[0].path);n.cmds.forEach(r=>{const o=/\.(png|jpg|gif|jpeg|webp)$/;if("img"===r.type&&o.test(i)&&1===s.length){const i={name:r.label,value:"plugin",icon:e.logo,desc:n.explain,type:e.pluginType,click:()=>{ie({plugin:e,fe:n,cmd:r,ext:{code:n.code,type:r.type||"text",payload:N["nativeImage"].createFromPath(s[0].path).toDataURL()},openPlugin:a,option:i}),c()}};t.push(i)}if(s.length>1||"file"===r.type&&new RegExp(r.match).test(i)){const i={name:r,value:"plugin",icon:e.logo,desc:n.explain,type:e.pluginType,click:()=>{ie({plugin:e,fe:n,cmd:r,option:i,ext:{code:n.code,type:r.type||"text",payload:s},openPlugin:a}),c()}};t.push(i)}})})}),i(t),void N["clipboard"].clear())}const u=N["clipboard"].availableFormats();if(u.length&&"text/plain"===u[0]){const e=N["clipboard"].readText();e.trim()&&(c(),window.setSubInputValue({value:e})),N["clipboard"].clear()}},c=()=>{r.value=[],t.value=[]},l=()=>{const e=N["clipboard"].readImage(),t=e.toDataURL();if(!t.replace("data:image/png;base64,",""))return;r.value=[{isFile:!0,isDirectory:!1,path:null,dataUrl:t}];const n=Object(Q["getGlobal"])("LOCAL_PLUGINS").getLocalPlugins(),o=[];n.forEach(e=>{const n=e.features;n&&(n.forEach(n=>{n.cmds.forEach(i=>{if("img"===i.type){const r={name:i.label,value:"plugin",icon:e.logo,desc:n.explain,type:e.pluginType,click:()=>{ie({plugin:e,fe:n,cmd:i,ext:{code:n.code,type:i.type||"text",payload:t},openPlugin:a,option:r}),c()}};o.push(r)}})}),i(o))})};return{searchFocus:o,clipboardFile:r,clearClipboardFile:c,readClipboardContent:l}};function ce(e){const t=e.replace(/.*\/([gimy]*)$/,"$1"),n=e.replace(new RegExp("^/(.*?)/"+t+"$"),"$1");return new RegExp(n,t)}function le(e,t,n=!1){return e.filter(e=>"string"===typeof e?!!ee["a"].match(e,t):"regex"!==e.type||n?"over"===e.type&&!n:ce(e.match).test(t))}const se=({searchValue:e,appList:t,openPlugin:n,currentPlugin:a})=>{const i=Object(g["ref"])([]);N["ipcRenderer"].on("global-short-key",(e,t)=>{const n=o(t,!0);n[0].click()});const r=(e,t)=>{let n=0;return ee["a"].match(e.label||e,t)&&(n+=1),e.label&&(n-=1),n},o=(a,i=!1)=>{const o=Object(Q["getGlobal"])("LOCAL_PLUGINS").getLocalPlugins();let c=[];o.forEach(t=>{const o=t.features;o&&o.forEach(o=>{const l=le(o.cmds,a,i);c=[...c,...l.map(i=>{const c={name:i.label||i,value:"plugin",icon:t.logo,desc:o.explain,type:t.pluginType,match:ee["a"].match(i.label||i,a),zIndex:r(i,a),click:()=>{ie({plugin:t,fe:o,cmd:i,ext:i.type?{code:o.code,type:i.type||"text",payload:e.value}:null,openPlugin:n,option:c})}};return c})]})});const l=t.value||[],s=new Map;return c=[...c,...l.filter(e=>{if(s.get(e))return!1;{s.set(e,!0);let t=!1;return e.keyWords.some(n=>{const i=ee["a"].match(n,a);return!!i&&(t=n,e.name=n,e.match=i,!0)}),t}}).map(e=>{const t={...e,zIndex:0,click:()=>{n(e,t)}};return t})],c};Object(g["watch"])(e,()=>c(e.value));const c=$()(e=>{a.value.name||u.value.length||(i.value=e?o(e):[])},100),l=e=>{i.value=e},{searchFocus:s,clipboardFile:u,clearClipboardFile:p,readClipboardContent:d}=oe({currentPlugin:a,optionsRef:i,openPlugin:n,setOptionsRef:l});return{setOptionsRef:l,options:i,searchFocus:s,clipboardFile:u,clearClipboardFile:p,readClipboardContent:d}};var ue=se;const pe=()=>{const e=new K["a"]({baseDir:ne}),t=Object(g["reactive"])({appList:[],plugins:[],localPlugins:[],currentPlugin:{},pluginLoading:!1,pluginHistory:[]}),n=Object(g["ref"])([]),a=async()=>{i(),n.value=await G(N["nativeImage"]),r()},i=()=>{const e=window.rubick.db.get(ae)||{};e&&e.data&&(t.pluginHistory=e.data)},r=()=>{const e=N["ipcRenderer"].sendSync("msg-trigger",{type:"dbGet",data:{id:"rubick-local-start-app"}});e&&e.value&&n.value.push(...e.value)};window.removeLocalStartPlugin=({plugin:e})=>{n.value=n.value.filter(t=>t.desc!==e.desc)},window.addLocalStartPlugin=({plugin:e})=>{window.removeLocalStartPlugin({plugin:e}),n.value.push(e)};const o=async n=>{d(""),N["ipcRenderer"].send("msg-trigger",{type:"setExpendHeight",data:60}),t.pluginLoading=!0,t.currentPlugin=n,"rubick-system-feature"!==n.name&&(await e.upgrade(n.name),t.pluginLoading=!1)},c=async(e,n)=>{if(N["ipcRenderer"].send("msg-trigger",{type:"removePlugin"}),window.initRubick(),"ui"===e.pluginType||"system"===e.pluginType){if(t.currentPlugin&&t.currentPlugin.name===e.name)return void window.rubick.showMainWindow();await o(e),window.rubick.openPlugin(JSON.parse(JSON.stringify({...e,ext:e.ext||{code:e.feature.code,type:e.cmd.type||"text",payload:null}})))}if("app"===e.pluginType)try{Object(b["exec"])(e.action)}catch(a){f["a"].error("启动应用出错，请确保启动应用存在！")}l({...e,...n,originName:e.name})},l=e=>{var n;const a=t.pluginHistory.filter(e=>!e.pin),i=t.pluginHistory.filter(e=>e.pin),r=null===(n=t.pluginHistory.find(t=>t.name===e.name))||void 0===n?void 0:n.pin;r?(i.forEach((t,n)=>{t.name===e.name&&(e=i.splice(n,1)[0])}),i.unshift(e)):(a.forEach((t,n)=>{t.name===e.name&&a.splice(n,1)}),a.unshift(e)),t.pluginHistory.length>8&&a.pop(),t.pluginHistory=[...i,...a];const o=window.rubick.db.get(ae)||{};window.rubick.db.put({_id:ae,_rev:o._rev,data:JSON.parse(JSON.stringify(t.pluginHistory))})},s=e=>{t.pluginHistory=e;const n=t.pluginHistory.filter(e=>!e.pin),a=t.pluginHistory.filter(e=>e.pin);t.pluginHistory=[...a,...n];const i=window.rubick.db.get(ae)||{};window.rubick.db.put({_id:ae,_rev:i._rev,data:JSON.parse(JSON.stringify(t.pluginHistory))})},{searchValue:u,onSearch:p,setSearchValue:d,placeholder:m}=X(),{options:h,searchFocus:y,setOptionsRef:w,clipboardFile:v,clearClipboardFile:O,readClipboardContent:j}=ue({searchValue:u,appList:n,openPlugin:c,currentPlugin:Object(g["toRefs"])(t).currentPlugin}),A=async({pluginName:t,pluginPath:n})=>{const a=await e.getAdapterInfo(t,n);return{...a,icon:a.logo,indexPath:T["a"].dev()?"http://localhost:8081/#/":"file://"+Y.a.join(n,"../",a.main)}},C=e=>{t.currentPlugin=e},k=e=>{t.plugins.unshift(e)},S=e=>{};return window.loadPlugin=e=>o(e),window.updatePlugin=({currentPlugin:e})=>{t.currentPlugin=e,Object(Q["getGlobal"])("LOCAL_PLUGINS").updatePlugin(e)},window.setCurrentPlugin=({currentPlugin:e})=>{t.currentPlugin=e,d("")},window.initRubick=()=>{t.currentPlugin={},d(""),w([]),window.setSubInput({placeholder:""})},window.pluginLoaded=()=>{t.pluginLoading=!1},window.searchFocus=(e,t)=>{N["ipcRenderer"].send("msg-trigger",{type:"removePlugin"}),window.initRubick(),y(e,t)},{...Object(g["toRefs"])(t),initPlugins:a,addPlugin:k,removePlugin:S,onSearch:p,getPluginInfo:A,openPlugin:c,changeSelect:C,options:h,searchValue:u,placeholder:m,searchFocus:y,setSearchValue:d,clipboardFile:v,clearClipboardFile:O,readClipboardContent:j,setPluginHistory:s,changePluginHistory:l}};var de=pe;const ge=()=>{let e,t,n,a=0,i=0,r=!0;const o=o=>{2!==o.button&&(r=!0,t=o.clientX,n=o.clientY,Math.abs(document.body.clientWidth-a)>5&&(a=document.body.clientWidth),Math.abs(document.body.clientHeight-i)>5&&(i=document.body.clientHeight),document.addEventListener("mouseup",c),e=requestAnimationFrame(l))},c=()=>{r=!1,document.removeEventListener("mouseup",c),cancelAnimationFrame(e)},l=()=>{N["ipcRenderer"].send("msg-trigger",{type:"windowMoving",data:{mouseX:t,mouseY:n,width:a,height:i}}),r&&(e=requestAnimationFrame(l))};return{onMouseDown:o}};var fe=ge,be=Object(g["defineComponent"])({__name:"App",setup(e){const{onMouseDown:t}=fe(),n=window.require("@electron/remote"),{initPlugins:a,getPluginInfo:i,options:r,onSearch:o,searchValue:c,changeSelect:l,openPlugin:s,currentPlugin:u,placeholder:p,pluginLoading:d,searchFocus:m,clipboardFile:h,setSearchValue:w,clearClipboardFile:v,readClipboardContent:O,pluginHistory:j,setPluginHistory:A,changePluginHistory:C}=de();a();const k=Object(g["ref"])(0),P=Object(g["ref"])({}),x=Object(g["ref"])(y.getConfig());i({pluginName:"feature",pluginPath:__static+"/feature/package.json"}).then(e=>{P.value=e,n.getGlobal("LOCAL_PLUGINS").addPlugin(e)}),Object(g["watch"])([r,j,u],()=>{k.value=0,u.value.name||window.rubick.setExpendHeight(_(r.value,d.value||!x.value.perf.common.history?[]:j.value))},{immediate:!0});const N=e=>{const t=r.value.length||j.value.length;t&&(k.value+e>t-1?k.value=0:k.value+e<0?k.value=t-1:k.value=k.value+e)},I=e=>{s({...Object(g["toRaw"])(P.value),feature:P.value.features[0],cmd:"插件市场",ext:e,click:()=>I(e)})};window.rubick.openMenu=I;const F=e=>{if(r.value.length){const e=r.value[k.value];e.click()}else{const t=Object(Q["getGlobal"])("LOCAL_PLUGINS").getLocalPlugins(),n=e||j.value[k.value];let a=!0;if("app"===n.pluginType)return a=!1,C(n),void Object(b["exec"])(n.action);if(t.find(e=>e.name===n.originName&&(a=!1,!0)),a){const e=window.rubick.db.get(ae)||{},t=e.data.filter(e=>e.originName!==n.originName);return A(t),f["a"].warning("插件已被卸载！")}C(n),window.rubick.openPlugin(JSON.parse(JSON.stringify({...n,ext:{code:n.feature.code,type:n.cmd.type||"text",payload:null}})))}},B=()=>{w("")};return(e,n)=>(Object(g["openBlock"])(),Object(g["createElementBlock"])("div",{id:"components-layout",onMousedown:n[0]||(n[0]=(...e)=>Object(g["unref"])(t)&&Object(g["unref"])(t)(...e))},[Object(g["createVNode"])(E,{currentPlugin:Object(g["unref"])(u),onChangeCurrent:N,onOnSearch:Object(g["unref"])(o),onOpenMenu:I,onChangeSelect:Object(g["unref"])(l),searchValue:Object(g["unref"])(c),placeholder:Object(g["unref"])(p),pluginLoading:Object(g["unref"])(d),pluginHistory:Object(g["unref"])(j),clipboardFile:Object(g["unref"])(h)||[],onChoosePlugin:F,onFocus:Object(g["unref"])(m),onClearSearchValue:B,onClearClipbord:Object(g["unref"])(v),onReadClipboardContent:Object(g["unref"])(O)},null,8,["currentPlugin","onOnSearch","onChangeSelect","searchValue","placeholder","pluginLoading","pluginHistory","clipboardFile","onFocus","onClearClipbord","onReadClipboardContent"]),Object(g["createVNode"])(S,{pluginHistory:Object(g["unref"])(j),currentPlugin:Object(g["unref"])(u),searchValue:Object(g["unref"])(c),currentSelect:k.value,options:Object(g["unref"])(r),clipboardFile:Object(g["unref"])(h)||[],onSetPluginHistory:Object(g["unref"])(A),onChoosePlugin:F},null,8,["pluginHistory","currentPlugin","searchValue","currentSelect","options","clipboardFile","onSetPluginHistory"])],32))}});n("d6ec");const me=be;var he=me;n("664e");const ye=y.getConfig();d["a"].config({theme:ye.perf.custom||{}}),window.rubick.changeTheme=()=>{const e=y.getConfig();d["a"].config({theme:e.perf.custom||{}})},Object(g["createApp"])(he).use(a["a"]).use(i["a"]).use(r["a"]).use(o["a"]).use(c["a"]).use(l["a"]).use(s["a"]).use(u["a"]).use(p["a"]).mount("#app")},ce38:function(e,t,n){"use strict";n("33b3")},d136:function(e,t){e.exports="data:image/png;base64,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"},d6ec:function(e,t,n){"use strict";n("0947")},f508:function(e,t,n){"use strict";n.r(t);n("14d9"),n("e9f5"),n("910d"),n("ab43"),n("e9c4"),n("5087");var a=n("8f1a"),i=n("df7c"),r=n.n(i),o=n("3e8f"),c=n.n(o);const l=n("e0ab"),s=e=>new Promise((t,n)=>{const a=r.a.join(e,"Contents","Info.plist");l.readFile(a,(n,a)=>{if(n||!a.CFBundleIconFile)return t("/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/GenericApplicationIcon.icns");const i=r.a.join(e,"Contents","Resources",a.CFBundleIconFile),o=[i,i+".icns",i+".tiff"],l=o.find(e=>c.a.existsSync(e));t(l||"/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/GenericApplicationIcon.icns")})}),u=(e,t)=>new Promise((n,a)=>{Object(o["exec"])(`sips -s format png '${e}' --out '${t}' --resampleHeightWidth 64 64`,e=>{e?a(e):n(null)})}),p=(e,t)=>s(e).then(e=>u(e,t));var d=p,g={getApps:()=>new Promise((e,t)=>Object(a["a"])(e,t)),isInstalled:e=>new Promise((t,n)=>Object(a["a"])(t,n,e)),app2png:d},f=n("3c43"),b=n.n(f);const m=r.a.join(b.a.tmpdir(),"ProcessIcon"),h=c.a.existsSync(m);h||c.a.mkdirSync(m);const y=/[\u4e00-\u9fa5]/;async function w(e,t,n){try{const t=r.a.join(m,n+".png"),a=r.a.join(m,n+".none"),i=c.a.existsSync(t),o=c.a.existsSync(a);return!!i||!o&&(await g.app2png(e,t),!0)}catch(a){return!1}}t["default"]=async e=>{let t=await g.getApps();t=t.filter(e=>{const t=r.a.extname(e.path);return".app"===t||".prefPane"===t});for(const n of t)await w(n.path,e,n._name)&&(n.icon="image://"+r.a.join(b.a.tmpdir(),"ProcessIcon",encodeURIComponent(n._name)+".png"));return t=t.filter(e=>!!e.icon),t=t.map(e=>{const t=e.path.split("/").pop(),n=r.a.extname(t),a=t.split(n)[0];let i={...e,value:"plugin",desc:e.path,pluginType:"app",action:"open "+e.path.replace(/ /g,"\\ "),keyWords:[a]};return e._name&&y.test(e._name)&&i.keyWords.push(e._name),i={...i,name:e._name,names:JSON.parse(JSON.stringify(i.keyWords))},i}),t}}});